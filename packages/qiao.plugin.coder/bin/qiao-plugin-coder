#!/usr/bin/env node

'use strict';

var qiaoPluginCli	= require('qiao.plugin.cli');
var qiaoPluginCoder = require('../lib/qiao.plugin.coder.js');

// init
async function init(){
	console.log('111111');
	var codeAnswers = await qiaoPluginCli.ask([{
		type		: 'input',
		name		: 'code',
		message		: 'Input code number, see:https://github.com/insistime/qiao.plugin.coder#01',
		validate	: function(input){
			var done = this.async();
			
			if(!input){
				done('need code number');
		        return;
			}
			
			done(null, true);
		}
	}]);
	
	if(frontAnswers.code == '01'){
		console.log('see : https://github.com/fe-100tal/fe.100tal/tree/qiao.plugin.coder#readme');
	}
}

// gen server code
async function genServerCode(){
	var serverAnswers = await qiaoPluginCli.ask([{
		type		: 'input',
		name		: 'tableName',
		message		: 'Input table name:',
		validate	: function(input){
			var done = this.async();
			
			if(!input){
				done('need table name');
		        return;
			}
			
			done(null, true);
		}
	},{
	    type		: 'input',
	    name		: 'destFolder',
	    message		: 'Input destination folder path:',
	    validate	: function(input){
			var done = this.async();
			
			if(!input){
				done('need destination folder path');
		        return;
			}
			
			done(null, true);
		}
	}]);
	
	var destFolder 	= serverAnswers.destFolder;
	var tableName	= serverAnswers.tableName;
	qiaoPluginCoder.genServerCode(destFolder, tableName);
}

// init
init();